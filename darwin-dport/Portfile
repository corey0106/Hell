# $Id$

PortSystem 1.0
# This python portgroup will require you to download the python dport =[
#PortGroup python 1.0

name             hellanzb
version          ____VERSION____
categories       net python
maintainers      #kgb
description      hella nzbs
long_description \
	hella nzbs. \
	hella.
homepage         http://www.hellanzb.com
platforms        darwin

master_sites     http://www.hellanzb.com/distfiles/
distname         hellanzb-${version}
checksums        ____MD5_CHECKSUM____

# Stripped from the python group
set python.bin   python

use_configure    no

build.cmd        ${python.bin} setup.py
build.target     build

destroot.cmd     ${python.bin} setup.py
destroot.destdir --prefix=${destroot}${prefix}

set sys_python_prefix /System/Library/Frameworks/Python.framework/Versions/Current

# FIXME: uninstall should kill the Hellanzb symlink

post-activate {
        # copy over the sample conf file if neccessary
        if { ![file exists ${prefix}/etc/${name}.conf] } {
             file copy ${prefix}/etc/${name}.conf.sample \
             ${prefix}/etc/${name}.conf
        }

        # Make sure Hellanzb is symlinked to the sys_python_prefix
        if { [file exists ${sys_python_prefix}/lib/python2.3/site-packages/Hellanzb] || \
             [file type ${sys_python_prefix}/lib/python2.3/site-packages/Hellanzb] == "link" } {
             file delete -force ${sys_python_prefix}/lib/python2.3/site-packages/Hellanzb
        }
        # FIXME: this is broken!!!!!!!!
        file link ${sys_python_prefix}/lib/python2.3/site-packages/Hellanzb \
             ${prefix}/lib/python2.3/site-packages/Hellanzb
}
